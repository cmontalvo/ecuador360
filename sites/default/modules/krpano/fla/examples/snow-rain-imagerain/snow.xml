<krpano version="1.0.8" onstart="randomizehorizon();">

	<progress showwait="none" showload="none" />
	<display flash10="false" movequality="LOW" stillquality="LOW" />

	<image type="SPHERE">
		<sphere url="pano.jpg" />
	</image>
	
	<view hlookat="0" vlookat="-80" fov="90" fisheye="0.35" />
	
	
	<autorotate enabled="true" waittime="0.5" accel="1.0" speed="5.0" horizon="0.0" tofov="90" />
	
	<action name="randomizehorizon">
		sub(tmp, random, 0.5);
		mul(autorotate.horizon, tmp, 180.0);
		<!--trace('autorotate.horizon=',autorotate.horizon);-->
		delayedcall(4, randomizehorizon());
	</action>
		

	<plugin name="snow"
	        url="%SWFPATH%/plugins/snow.swf"
	        blendmode="normal"
	        type="snow"
	        imageurl=""
	        imagescale="1.0"
	        flakes="4000"
	        color="0xFFFFFF"
	        floor="0.3"
	        speed="1.0"
	        spreading="4.0"
	        shake="4.0"
	        speedvariance="2.0"
	        rainwidth="0.5"
	        rainalpha="0.5"
	        />


	<plugin name="combobox" url="%SWFPATH%/plugins/combobox.swf" 
	        align="leftbottom" x="10" y="10" width="120" 
	        rowcount="8"
	        onloaded="fillcombobox();" 
	        />
	
	<action name="fillcombobox">
		addIdItem(1, 'Snow',            action(snow);       );
		addIdItem(2, 'Rain',            action(rain);       );
		addIdItem(3, 'Heavy Rain',      action(heavyrain);  );
		addIdItem(4, 'Stars',           action(stars);      );
		addIdItem(5, 'Hearts',          action(hearts);     );
		addIdItem(6, 'Rose Hearts',     action(rosehearts); );
		addIdItem(7, 'Smileys',         action(smileys);    );
		addIdItem(8, 'SilverStar/Snow', action(silverstar); );
		selectIdItem(1);
	</action>
	
	<action name="snow">
		set(plugin[snow].type,          snow);
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         4000);
		set(plugin[snow].color,         0xFFFFFF);
		set(plugin[snow].speed,         1.0);
		set(plugin[snow].shake,         4.0);
		set(plugin[snow].speedvariance, 2.0);
		set(plugin[snow].spreading,     4.0);
	</action>
	
	<action name="rain">
		set(plugin[snow].type,          rain);
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         2000);
		set(plugin[snow].color,         0x7FAFFF);
		set(plugin[snow].speed,         2.0);
		set(plugin[snow].shake,         1.0);
		set(plugin[snow].speedvariance, 1.0);
		set(plugin[snow].spreading,     3.0);
		set(plugin[snow].rainwidth,     1.0);
		set(plugin[snow].rainalpha,     0.5);
	</action>	
	
	<action name="heavyrain">
		set(plugin[snow].type,          rain);
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         4000);
		set(plugin[snow].color,         0x9FAFFF);
		set(plugin[snow].speed,         4.1);
		set(plugin[snow].shake,         0.0);
		set(plugin[snow].speedvariance, 1.5);
		set(plugin[snow].spreading,     4.0);
		set(plugin[snow].rainwidth,     1.5);
		set(plugin[snow].rainalpha,     0.3);
	</action>	
	
	<action name="stars">
		set(plugin[snow].type,          image);
		set(plugin[snow].imageurl,      '%CURRENTXML%/star.png');
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         1000);
		set(plugin[snow].imagescale,    1.0);
		set(plugin[snow].speed,         1.0);
		set(plugin[snow].shake,         4.0);
		set(plugin[snow].speedvariance, 2.0);
		set(plugin[snow].spreading,     1.9);
	</action>
	
	<action name="hearts">
		set(plugin[snow].type,          image);
		set(plugin[snow].imageurl,      '%CURRENTXML%/heart.png');
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         1000);
		set(plugin[snow].imagescale,    1.2);
		set(plugin[snow].speed,         1.0);
		set(plugin[snow].shake,         4.0);
		set(plugin[snow].speedvariance, 2.0);
		set(plugin[snow].spreading,     1.5);
	</action>
	
	<action name="rosehearts">
		set(plugin[snow].type,          image);
		set(plugin[snow].imageurl,      '%CURRENTXML%/roseheart.png');
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         1000);
		set(plugin[snow].imagescale,    1.0);
		set(plugin[snow].speed,         1.0);
		set(plugin[snow].shake,         4.0);
		set(plugin[snow].speedvariance, 2.0);
		set(plugin[snow].spreading,     1.5);
	</action>
	
	<action name="smileys">
		set(plugin[snow].type,          image);
		set(plugin[snow].imageurl,      '%CURRENTXML%/smiley.png');
		set(plugin[snow].blendmode,     normal);
		set(plugin[snow].count,         1000);
		set(plugin[snow].imagescale,    1.0);
		set(plugin[snow].speed,         1.0);
		set(plugin[snow].shake,         4.0);
		set(plugin[snow].speedvariance, 2.0);
		set(plugin[snow].spreading,     1.5);
	</action>
	
	<action name="silverstar">
		set(plugin[snow].type,          image);
		set(plugin[snow].imageurl,      '%CURRENTXML%/silverstar.png');
		set(plugin[snow].blendmode,     add);
		set(plugin[snow].count,         2000);
		set(plugin[snow].imagescale,    0.3);
		set(plugin[snow].speed,         1.0);
		set(plugin[snow].shake,         4.0);
		set(plugin[snow].speedvariance, 2.0);
		set(plugin[snow].spreading,     2.0);
	</action>

</krpano>
